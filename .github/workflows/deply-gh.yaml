name: Build and Deploy
on:
  push:
    branches:
      - master
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [12.x]

    steps:
      - name: Descargar proyecto
        uses: actions/checkout@v2
        with:
          persist-credential: false

      - name: Instalar Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node-version }}

      - name: Instalar dependencias
        run: |
          npm install

      - name: Revisar sintaxis estándar prettier
        run: |
          echo "Recuerda tener instalado Prettier como formateador de código en tu Editor de texto"
          echo "Este código usará como estándar la indentación de Prettier."
          echo "Para solucionar tu indentación, ejecuta npm run sintax:fix"
          npm run test:sintax

      - name: Build proyect
        env:
          CI: false
        run: |
          npm run build

      - name: Deploy
        uses: JamesIves/github-pages-deploy-action@3.5.9
        env:
          ACTIONS_ALLOW_UNSECURE_COMMANDS: "true"
        with:
          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}
          BRANCH: gh-pages
          FOLDER: build
